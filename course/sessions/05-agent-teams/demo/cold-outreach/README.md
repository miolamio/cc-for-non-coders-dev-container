# Персонализированный cold outreach (agent team)

## Что показываем

Агенты параллельно готовят уникальные письма для 20 компаний. У каждой компании свои боли, свои новости, своя специфика, и письмо должно это учитывать. Когда один агент находит работающий заход (например, связка "недавняя новость компании + наш похожий кейс + цифра"), он передаёт его другим агентам, и те адаптируют приём под свои компании.

## Время выполнения

- **Claude (Opus 4.6):** 6-10 минут
- **GLM 4.7:** 10-15 минут (реже обмениваются паттернами между агентами; иногда полезно напомнить в промпте "обменивайтесь находками")

## Данные

Файл `target-companies.csv` содержит 20 компаний:
- `company_name` -- название
- `industry` -- отрасль
- `size` -- размер
- `website` -- сайт
- `key_person` -- контактное лицо
- `position` -- должность
- `recent_news` -- свежие новости о компании
- `pain_points` -- известные проблемы и боли

Компании из разных отраслей: e-grocery, edtech, foodtech, финтех, логистика, девелопмент, стриминг, HR-tech, healthtech, e-commerce и другие.

## Роли агентов

Team lead распределяет компании между агентами -- каждый получает свою пачку и пишет письма. Все агенты делают одно и то же, но параллельно.

**Агент 1 -- первая пачка компаний** (например, 7 компаний). Пишет персонализированные письма, отсылаясь к recent_news и pain_points каждой.

**Агент 2 -- вторая пачка** (7 компаний). Делает то же самое. Если находит работающий формат или заход, сообщает остальным.

**Агент 3 -- третья пачка** (6 компаний). Плюс финальная вычитка: проверяет, что письма не шаблонные, нет повторяющихся формулировок между разными компаниями.

## Как запустить демо

```
cd sessions/05-agent-teams/demo/cold-outreach
claude
```

Промпт:

```
У нас есть файл target-companies.csv с 20 компаниями. Нужно подготовить персонализированное письмо для каждой.

Мы — компания "Формат", консалтинг по бизнес-процессам и автоматизации (CRM, отделы продаж, аудит). Наш сайт: format-consulting.ru

Для каждой компании напиши короткое письмо (150–200 слов):
- Обращение к конкретному человеку по имени
- Отсылка к недавним новостям компании (колонка recent_news)
- Связь между их болью (pain_points) и нашей экспертизой
- Конкретное предложение (не "давайте встретимся", а "покажу, как мы решили похожую задачу для X")
- Призыв к действию

Распредели работу между агентами. Если кто-то найдёт удачный заход или формулировку — пусть поделится с остальными.

Результат — файл outreach-letters.md со всеми 20 письмами.
```

## Пример хорошего и посредственного письма

Чтобы инструктор мог оценить качество того, что сгенерировали агенты, вот два примера для одной и той же компании (HeadHunter).

**Посредственное письмо** (общие фразы, нет конкретики):

```
Тема: Сотрудничество

Добрый день, Сергей!

Мы — компания "Формат", занимаемся консалтингом по бизнес-процессам.
Знаем, что HeadHunter — лидер на рынке рекрутинга. Мы могли бы помочь
вам оптимизировать процессы и повысить эффективность. У нас большой
опыт работы с IT-компаниями.

Давайте встретимся и обсудим возможности сотрудничества?

С уважением, "Формат"
```

Что плохо: обращение к "лидеру рынка" (лесть), нет связи с конкретной проблемой компании, нет отсылки к новостям, предложение "давайте встретимся" (слишком размытый CTA).

**Хорошее письмо** (конкретика, связь с болью, похожий кейс):

```
Тема: Конверсия из отклика в собеседование — опыт с похожей задачей

Сергей, добрый день.

Видел, что HeadHunter внедрил AI-скоринг резюме и тестирует видеоинтервью
с анализом речи. Вопрос, который обычно идёт следом: как это влияет на
процессы рекрутеров-клиентов, которые работают с площадкой.

Мы помогали Skyeng перестроить процесс найма, когда у них поменялся
инструментарий оценки кандидатов. Сократили цикл от отклика до решения
с 14 до 6 дней. У вас конверсия из отклика в собеседование — 4%;
часть проблемы, возможно, не в скоринге, а в том, как работодатели
обрабатывают уже отфильтрованных кандидатов.

Могу показать, что именно мы перестроили у Skyeng и какие цифры
получились. 20 минут созвона — хватит, чтобы понять, есть ли пересечение.

Артём, "Формат"
```

Что хорошо: конкретная отсылка к новости (AI-скоринг), связь с болью (4% конверсия), похожий кейс с цифрами (Skyeng, с 14 до 6 дней), конкретный CTA (20 минут, покажу кейс).

## На что обратить внимание студентов

### 1. Обмен паттернами между агентами

Главная фишка этого демо. Один агент пишет письмо для HeadHunter и делает заход: "Видел, что вы внедрили AI-скоринг резюме, мы помогали [другой компании] настроить похожую систему и сократить мусорные отклики на 60%."

Он сообщает другим: "Хорошо работает связка 'видел вашу новость' + 'у нас был похожий кейс' + конкретная цифра." Другие агенты адаптируют этот паттерн под свои компании.

Покажите это сообщение в интерфейсе. В субагентной модели каждый агент работает изолированно и не может передать находки соседу.

### 2. Параллельная работа

Все три агента пишут письма одновременно. Это быстрее, чем последовательная обработка 20 компаний одним агентом. Покажите, как в tmux/split pane видно три потока работы.

### 3. Финальная проверка

Агент 3 после написания своих писем проверяет все 20 на уникальность. Если два письма начинаются одинаково или используют идентичную формулировку, он просит автора переписать. Это элемент взаимного контроля, которого нет в субагентной модели.

### 4. Адаптация тона под должность

Письмо CTO и письмо коммерческому директору -- разные вещи. CTO интересуют технические детали и интеграции. Коммерческого директора -- цифры: конверсия, средний чек, ROI. Покажите, как агенты учитывают колонку `position`.

## Ожидаемый результат

- `outreach-letters.md` -- 20 персонализированных писем, сгруппированных по компаниям:
  - Тема письма
  - Текст (150-200 слов)
  - Конкретная отсылка к новостям и болям компании

## Отличие от субагентов

С субагентами из занятия 4 вы бы сказали: "Напиши 20 писем", и Claude запустил бы субагентов, каждый из которых написал бы свои письма и вернул результат. Никакого обмена находками, никакой взаимной проверки. Здесь:
- Агент, который нашёл работающий подход, передаёт его команде
- Агенты проверяют работу друг друга
- Финальный результат более однородный по качеству, потому что лучшие практики распространяются в процессе

## Разрешение конфликтов

### Два агента пишут письмо для одной компании

Редко, но бывает: team lead нечётко распределил пачки, и два агента берутся за одну компанию. Один из них обнаружит, что письмо уже есть в outreach-letters.md, и пропустит эту компанию. Если оба написали, агент 3 при финальной проверке выберет лучшее.

### Агент пишет шаблонные письма

Если все письма от одного агента начинаются с "Добрый день, [Имя]! Видел, что ваша компания..." и дальше по одной схеме, это проблема. Дайте фидбэк: "Письма от агента 2 однотипные. Варьируй структуру: начни одно с вопроса, другое с комплимента конкретному решению, третье с цифры."

### Агенты спорят о формате или стиле

Один агент пишет формально, другой разговорно. Team lead должен задать единый тон в промпте. Если спор начался в процессе, уточните: "Тон -- деловой, но не формальный. Без 'Уважаемый', но и без сленга."

## Фолбэки

**Агенты не делятся паттернами.** Иногда team lead не настраивает коммуникацию между агентами. Если это произошло, укажите в промпте явно: "Агенты должны обмениваться находками через сообщения."

**Письма получаются шаблонными.** Если агенты используют один и тот же формат (приветствие, новость, боль, предложение, CTA), письма будут похожи. Укажите в промпте: "Варьируй структуру. Не все письма должны начинаться с 'Добрый день, [Имя]'."

**Слишком длинные письма.** Cold outreach работает коротко. Если агенты пишут по 400 слов, уточните лимит.

**GLM 4.7 генерирует менее персонализированные письма.** Если видите, что письма слабо привязаны к конкретике из CSV, попробуйте добавить в промпт: "Обязательно процитируй конкретный факт из колонки recent_news в каждом письме."
