# Claude Code + n8n: запуск по расписанию и триггеру

## Что это

Обзорное демо (не практическое упражнение). Показываем студентам, как Claude Code можно запускать из n8n -- платформы автоматизации. Идея: n8n работает как планировщик, а Claude Code -- как исполнитель.

Студенты не настраивают n8n на занятии. Цель -- показать возможность и дать представление о том, как это устроено, чтобы те, кому интересно, могли попробовать самостоятельно.

## Зачем это нужно

На курсе мы научились запускать Claude Code вручную: открыл терминал, написал промпт, получил результат. Но некоторые задачи нужно запускать регулярно: еженедельный отчёт, ежедневный дайджест новостей, проверка данных каждое утро.

n8n позволяет:
- Запускать Claude Code по расписанию (каждый понедельник в 9:00)
- Запускать по триггеру (пришло письмо -- Claude анализирует и отвечает)
- Передавать результат дальше (отправить отчёт в Telegram, сохранить в Google Drive)

## Как это работает технически

n8n вызывает Claude Code через командную строку (CLI). Упрощённая схема:

```
[n8n: Schedule Trigger, каждый пн 9:00]
    ↓
[n8n: Execute Command]
    claude -p "Собери еженедельный отчёт из папки /data/weekly"
    ↓
[n8n: Read File]
    Прочитать сгенерированный файл weekly-report.md
    ↓
[n8n: Telegram]
    Отправить отчёт в рабочий чат
```

Флаг `-p` (print mode) запускает Claude Code в неинтерактивном режиме: он получает промпт, выполняет задачу и завершается. Это позволяет использовать его как обычную CLI-утилиту внутри любого скрипта или автоматизации.

## Пример рабочего процесса

Подробный пример описан в файле `n8n-workflow-example.md`: еженедельный отчёт, который собирается автоматически каждый понедельник.

## Что показать студентам

1. Откройте `n8n-workflow-example.md` и пройдитесь по шагам
2. Покажите, как выглядит нода Execute Command в n8n (можно на скриншоте или в открытом n8n, если он установлен)
3. Покажите запуск `claude -p "..."` в терминале -- чтобы студенты поняли, что `-p` делает Claude Code неинтерактивным
4. Объясните, что n8n -- не единственный вариант. Cron, GitHub Actions, любой планировщик задач работает аналогично

## Ограничения

- Claude Code должен быть установлен на той же машине, где работает n8n
- Авторизация (API-ключ или сессия) должна быть настроена заранее
- Длительные задачи (больше 5-10 минут) могут потребовать настройки таймаутов в n8n
- n8n Community Edition бесплатен, но требует self-hosting (Docker или npm)
